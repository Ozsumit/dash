generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
url      = env("DATABASE_URL") 

}

// =========================================================
// NEW: SEO Configuration Model
// =========================================================

model Seo {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // --- Basic Meta Tags ---
  metaTitle       String?  // <title>
  metaDescription String?  // <meta name="description">
  keywords        String?  // <meta name="keywords"> (Comma separated)
  canonicalUrl    String?  // <link rel="canonical">

  // --- Indexing & Robots ---
  noIndex   Boolean @default(false)
  noFollow  Boolean @default(false)

  // --- Open Graph (Facebook/Social) ---
  ogTitle       String?
  ogDescription String?
  ogImage       String? // URL to override the default post image
  ogType        String  @default("website") // website, article, event

  // --- Twitter Card ---
  twitterCard  String? // summary, summary_large_image
  twitterTitle String?

  // --- Advanced ---
  structuredData Json?   @db.JsonB // For custom JSON-LD (Schema.org)

  // --- RELATIONS: Linking to your Content ---
  
  // 1. For Static Pages (e.g. "home", "about", "contact")
  pageSlug String? @unique

  // 2. For Dynamic Content (One-to-One relationships)
  notice   Notice? @relation(fields: [noticeId], references: [id], onDelete: Cascade)
  noticeId Int?    @unique

  post   Post? @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId Int?  @unique

  event   Event? @relation(fields: [eventId], references: [id], onDelete: Cascade)
  eventId Int?   @unique

  galleryItem   GalleryItem? @relation(fields: [galleryItemId], references: [id], onDelete: Cascade)
  galleryItemId Int?         @unique
}

// =========================================================
// EXISTING MODELS (Updated with SEO relations)
// =========================================================

model Notice {
  id          Int       @id @default(autoincrement())
  title       String
  date        DateTime
  category    String
  description String
  mediaType   String?
  mediaUrl    String?
  accent      String?
  createdAt   DateTime? @default(now())
  updatedAt   DateTime? @updatedAt

  // Relation to SEO
  seo Seo?
}

model Post {
  id        Int      @id @default(autoincrement())
  title     String
  excerpt   String?
  author    String
  date      DateTime @default(now())
  readTime  String?
  category  String?
  image     String?
  accent    String   @default("bg-blue-600")
  featured  Boolean  @default(false)
  trending  Boolean  @default(false)
  content   String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relation to SEO
  seo Seo?
}

model Event {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  date        DateTime
  location    String
  category    String?
  image       String?
  accent      String   @default("bg-blue-600")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relation to SEO
  seo Seo?
}

model GalleryItem {
  id          Int      @id @default(autoincrement())
  title       String
  imageUrl    String
  description String?
  category    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relation to SEO
  seo Seo?
}

// =========================================================
// UNCHANGED MODELS
// =========================================================

model User {
  id          Int      @id @default(autoincrement())
  username    String   @unique
  password    String
  collegeCode String
  role        String   @default("admin")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model SportsRegistration {
  id                String   @id @default(cuid())
  firstName         String
  lastName          String
  email             String
  phone             String
  participationType String // "Solo" or "Team"
  sport             String
  teamName          String?
  message           String?
  createdAt         DateTime @default(now())
}

model Popup {
  id          String   @id @default(cuid())
  title       String
  description String
  imageUrl    String?
  buttonText  String
  buttonLink  String
  isActive    Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}